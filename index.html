<!doctype html>
<html lang="ko">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Raining Letters— Aesthetic Drift</title>

<link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@300;400;500;600&family=Comfortaa:wght@600;700&display=swap" rel="stylesheet" />

<style>
:root{
  /* 칩 진한 정도 조절 변수 */
  --chip-bg-alpha:.58;             /* 기본 내부 채움 투명도 */
  --chip-border-alpha:.98;         /* 기본 테두리 투명도 */
  --chip-glow:0 0 10px rgba(255,255,255,.85);

  --floaty-sat:78%;
  --floaty-light:56%;

  /* 기본 테마(Sunset)는 JS로 바뀜 */
  --bg0:hsl(16 100% 96%);
  --bg1:hsl(22 95% 92%);
  --bg2:hsl(338 85% 94%);
  --bg3:hsl(267 65% 92%);
}
*{box-sizing:border-box}
html,body{height:100%}
body{
  margin:0; padding:5vmin 6vmin;
  font-family:'Plus Jakarta Sans',-apple-system,BlinkMacSystemFont,'Segoe UI',Roboto,sans-serif;
  font-size:18px; line-height:1.7; letter-spacing:.02em; color:hsl(260 25% 18%);
  background:
    radial-gradient(1200px 900px at 20% 10%, var(--bg2), transparent 60%),
    radial-gradient(1200px 900px at 85% 0%,  var(--bg1), transparent 60%),
    radial-gradient(1200px 900px at 50% 95%, var(--bg3), transparent 60%),
    var(--bg0);
  overflow-x:hidden; display:grid; grid-template-rows:auto auto 1fr; gap:1.2rem; position:relative;
  -webkit-font-smoothing:antialiased;
}

/* mesh & grain */
.mesh{
  position:fixed; inset:-20vmax; z-index:-4; pointer-events:none;
  filter:blur(40px) saturate(115%);
  animation:drift 28s linear infinite;
}
@keyframes drift{0%{transform:translate3d(0,0,0) rotate(0)}50%{transform:translate3d(3%,-2%,0) rotate(6deg)}100%{transform:none}}
.grain{position:fixed; inset:0; z-index:-3; pointer-events:none;
  background-image:url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="140" height="140"><filter id="n"><feTurbulence type="fractalNoise" baseFrequency="0.8" numOctaves="2"/></filter><rect width="100%" height="100%" filter="url(%23n)" opacity=".04"/></svg>');
  opacity:.4; mix-blend-mode:multiply;
}

/* floaties */
.floaties{position:fixed; inset:0; z-index:-2; pointer-events:none; overflow:hidden}
.floaty{
  position:absolute; font-size:var(--fs,20px);
  filter:drop-shadow(0 6px 12px rgba(50,30,60,.22));
  opacity:var(--op,.7); will-change:transform,opacity;
  animation:floatY var(--dur,16s) linear infinite, sway var(--sway,7s) ease-in-out infinite alternate, spin var(--rot,18s) linear infinite, twinkle var(--tw,3s) ease-in-out infinite;
}
@keyframes floatY{from{transform:translateY(140vh)} to{transform:translateY(-120vh)}}
@keyframes sway{from{translate:0 0} to{translate:var(--dx,18px) 0}}
@keyframes spin{from{rotate(0)} to{rotate(360deg)}}
@keyframes twinkle{0%,100%{opacity:var(--op,.7)} 50%{opacity:calc(var(--op,.7) * .5)}}

/* header */
header{display:flex;align-items:flex-end;justify-content:space-between;flex-wrap:wrap;gap:1rem}
h1{
  margin:0;
  font-family:'Comfortaa','Plus Jakarta Sans',system-ui,sans-serif;
  font-weight:700; letter-spacing:.02em;
  font-size:clamp(1.7rem, 3.6vw + .2rem, 3.4rem);
  background:linear-gradient(90deg,hsl(22 95% 54%), hsl(338 85% 56%), hsl(267 65% 58%), hsl(22 95% 54%));
  background-size:300% 100%;
  -webkit-background-clip:text; background-clip:text; color:transparent;
  animation:titleShift 12s ease-in-out infinite;
  text-shadow:0 1px 0 rgba(255,255,255,.55);
}
@keyframes titleShift{0%{background-position:0% 50%}50%{background-position:100% 50%}100%{background-position:0% 50%}}
.toolbar{display:flex;gap:.6rem;flex-wrap:wrap}
.btn{
  display:inline-flex;align-items:center;gap:.45rem;padding:.55em .9em;border-radius:1rem;
  background:rgba(255,255,255,.28);border:1px solid rgba(255,255,255,.6);
  box-shadow:0 8px 30px rgba(80,40,60,.15);
  backdrop-filter:blur(12px) saturate(120%);
  cursor:pointer;user-select:none;transition:transform .15s ease,box-shadow .25s ease,background .25s ease;
}
.btn:hover{transform:translateY(-2px);box-shadow:0 16px 50px rgba(80,40,60,.22)}

/* input panel */
.panel{
  display:flex;gap:.6rem;align-items:center;flex-wrap:wrap;
  padding:1rem;border-radius:1.2rem;background:rgba(255,255,255,.25);border:1px solid rgba(255,255,255,.55);
  box-shadow:0 8px 30px rgba(80,40,60,.12);
  backdrop-filter:blur(14px) saturate(130%);
}
.field{display:flex;align-items:center;gap:.5rem;padding:.5rem .75rem;background:rgba(255,255,255,.33);border-radius:.9rem;border:1px solid rgba(255,255,255,.6)}
label{font-size:.9rem;color:hsl(260 14% 38%)}
input{
  border:none;outline:none;font:inherit;background:transparent;color:hsl(260 25% 18%);
  min-width:22ch;
}
.hint{margin:.2rem 0 0;color:hsl(260 14% 38%);font-size:.95rem;text-shadow:0 1px 0 rgba(255,255,255,.35)}

/* ===== Falling Chips ===== */
.snow-layer{ position:fixed; inset:0; z-index:5; pointer-events:none; overflow:hidden; }
.chip{
  position:fixed; top:-10vh; left:0;
  display:inline-block; padding:.42em .85em .48em; border-radius:1.1rem;
  background:rgba(255,255,255,var(--chip-bg-alpha));            /* 기본 내부 채움(유리) */
  border:1px solid hsl(var(--h,22) 82% 58% / var(--chip-border-alpha));
  color:#fff; text-shadow:var(--chip-glow);
  box-shadow:
    inset 0 1px 0 rgba(255,255,255,.85),
    0 8px 26px rgba(60,30,40,.34);
  backdrop-filter:blur(16px) saturate(160%);
  -webkit-backdrop-filter:blur(16px) saturate(160%);
  white-space:nowrap; will-change:transform,opacity;
  transform:translate3d(0,-20vh,0);
  transition:background .28s ease, box-shadow .28s ease, border-color .28s ease;
  animation:
    chip-fall var(--dur,12s) linear forwards,
    chip-sway var(--sway,6s) ease-in-out infinite alternate,
    chip-tilt var(--tilt,12s) linear infinite,
    chip-fade var(--dur,12s) linear forwards;
  pointer-events:auto;   /* 컨테이너는 막더라도 칩은 hover 가능 */
}

/* ✅ hover 시 내부가 ‘진하게 물드는’ 효과 */
.chip:hover{
  /* hue 컬러와 섞어 내부 채움을 더 진하게 */
  background:
    color-mix(in oklab, rgba(255,255,255,.35), hsl(var(--h) 85% 58% / .85));
  border-color: hsl(var(--h) 90% 60% / 1);
  box-shadow:
    inset 0 1px 0 rgba(255,255,255,1),
    0 12px 44px hsl(var(--h) 85% 52% / .55);
}

@keyframes chip-fall{0%{transform:translate3d(0,-20vh,0)}100%{transform:translate3d(0,120vh,0)}}
@keyframes chip-sway{from{translate:0 0}to{translate:var(--dx,28px) 0}}
@keyframes chip-tilt{from{rotate(0)}to{rotate(360deg)}}
@keyframes chip-fade{0%{opacity:0}8%{opacity:1}85%{opacity:1}100%{opacity:0}}

@media (prefers-reduced-motion:reduce){
  .mesh{animation:none}
  .floaty{animation:none}
  .chip{animation:none; opacity:1}
}
</style>
</head>
<body>
  <div class="mesh" id="mesh" aria-hidden="true"></div>
  <div class="grain" aria-hidden="true"></div>
  <div class="floaties" id="floaties" aria-hidden="true"></div>
  <div class="snow-layer" id="snow"></div>

  <header>
    <h1>Letters</h1>
    <div class="toolbar">
      <button class="btn" id="shuffleTheme">Shuffle Aesthetic</button>
      <button class="btn" id="clearAll">Clear Screen</button>
    </div>
  </header>

  <section class="panel" aria-label="입력">
    <div class="field">
      <label for="word">Type</label>
      <input id="word" type="text" placeholder="단어(또는 문장)를 입력하고 Enter — 단어마다 글라스 칩이 떨어져요" />
    </div>
    <div class="hint">문장을 붙여넣으면 공백 단위로 칩이 여러 개 생깁니다.</div>
  </section>

<script>
/* ==== Themes ==== */
const THEMES=[
  {name:'Sunset',bg:{base:['hsl(16 100% 96%)','hsl(22 95% 92%)','hsl(338 85% 94%)','hsl(267 65% 92%)'],
  mesh:['hsl(22 95% 85% / .55)','hsl(338 85% 85% / .45)','hsl(267 65% 82% / .50)']},
  hues:[16,22,28,34,338,350,267,285]},
  {name:'Twilight',bg:{base:['hsl(248 45% 96%)','hsl(258 55% 92%)','hsl(290 60% 94%)','hsl(220 40% 93%)'],
  mesh:['hsl(258 70% 85% / .55)','hsl(290 65% 86% / .45)','hsl(220 55% 86% / .50)']},
  hues:[252,268,284,298,220,232]},
  {name:'Aurora',bg:{base:['hsl(165 55% 96%)','hsl(155 55% 92%)','hsl(210 52% 94%)','hsl(265 45% 93%)'],
  mesh:['hsl(160 70% 84% / .55)','hsl(200 70% 86% / .45)','hsl(265 60% 86% / .50)']},
  hues:[160,170,190,205,265,275]},
  {name:'Peach Soda',bg:{base:['hsl(18 100% 96%)','hsl(25 95% 93%)','hsl(8 85% 95%)','hsl(40 80% 93%)'],
  mesh:['hsl(18 95% 85% / .6)','hsl(8 85% 86% / .5)','hsl(40 80% 86% / .5)']},
  hues:[12,18,24,34,8,40]},
  {name:'Midnight Lagoon',bg:{base:['hsl(215 55% 95%)','hsl(210 50% 91%)','hsl(198 60% 93%)','hsl(245 45% 92%)'],
  mesh:['hsl(205 70% 85% / .55)','hsl(198 70% 86% / .45)','hsl(245 60% 86% / .50)']},
  hues:[198,205,212,230,245,255]}
];
const meshEl=document.getElementById('mesh');
const floatiesHost=document.getElementById('floaties');
const snow=document.getElementById('snow');
const input=document.getElementById('word');
let currentTheme=null;

function applyTheme(t){
  currentTheme=t;
  document.documentElement.style.setProperty('--bg0',t.bg.base[0]);
  document.documentElement.style.setProperty('--bg1',t.bg.base[1]);
  document.documentElement.style.setProperty('--bg2',t.bg.base[2]);
  document.documentElement.style.setProperty('--bg3',t.bg.base[3]);
  meshEl.style.background=`
    radial-gradient(35% 35% at 20% 20%, ${t.bg.mesh[0]}, transparent 70%),
    radial-gradient(42% 42% at 80% 25%, ${t.bg.mesh[1]}, transparent 70%),
    radial-gradient(38% 38% at 70% 80%, ${t.bg.mesh[2]}, transparent 70%)`;
  makeFloaties(t);
}
function randomTheme(prev){
  let n=THEMES[Math.floor(Math.random()*THEMES.length)];
  if(prev && n.name===prev.name) n=THEMES[(THEMES.indexOf(prev)+1)%THEMES.length];
  return n;
}

/* floaties */
function makeFloaties(t){
  floatiesHost.innerHTML='';
  const g=['✦','❋','✿','⋆','•','♡','◦','⟁','✧','✺'];
  for(let i=0;i<60;i++){
    const s=document.createElement('span');s.className='floaty';s.textContent=g[i%g.length];
    const l=(Math.random()*100).toFixed(2)+'%',b=(-60-Math.random()*80).toFixed(2)+'vh';
    const fs=(12+Math.random()*26).toFixed(1)+'px',dur=(14+Math.random()*12).toFixed(2)+'s',sway=(6+Math.random()*4).toFixed(2)+'s';
    const dx=(8+Math.random()*22).toFixed(0)+'px',rot=(14+Math.random()*16).toFixed(2)+'s',tw=(2.4+Math.random()*2.6).toFixed(2)+'s';
    const op=(0.45+Math.random()*0.45).toFixed(2),h=t.hues[i%t.hues.length];
    s.style.left=l;s.style.bottom=b;s.style.setProperty('--fs',fs);s.style.setProperty('--dur',dur);
    s.style.setProperty('--sway',sway);s.style.setProperty('--dx',dx);s.style.setProperty('--rot',rot);s.style.setProperty('--tw',tw);s.style.setProperty('--op',op);
    s.style.color=`hsl(${h} var(--floaty-sat) var(--floaty-light) / .9)`;s.style.animationDelay=(Math.random()*-parseFloat(dur)).toFixed(2)+'s';
    floatiesHost.appendChild(s);
  }
}

/* spawn chip */
function spawnChip(txt){
  const chip=document.createElement('span');
  chip.className='chip';
  chip.textContent=txt;
  const vw=Math.max(document.documentElement.clientWidth,window.innerWidth||0);
  chip.style.left=Math.floor(Math.random()*(vw-60))+20+'px';
  const hues=currentTheme?currentTheme.hues:THEMES[0].hues;
  chip.style.setProperty('--h',hues[Math.floor(Math.random()*hues.length)]);
  const dur=(9+Math.random()*10).toFixed(2)+'s',sway=(6+Math.random()*6).toFixed(2)+'s',tilt=(12+Math.random()*12).toFixed(2)+'s',dx=(18+Math.random()*34).toFixed(0)+'px';
  chip.style.setProperty('--dur',dur);chip.style.setProperty('--sway',sway);chip.style.setProperty('--tilt',tilt);chip.style.setProperty('--dx',dx);
  chip.addEventListener('animationend',e=>{if(e.animationName==='chip-fall')chip.remove();});
  snow.appendChild(chip);
}
function spawnFromInput(v){v.trim().split(/\s+/).filter(Boolean).forEach(spawnChip);}

/* events */
input.addEventListener('keydown',e=>{
  if(e.key==='Enter'){e.preventDefault();if(input.value.trim()){spawnFromInput(input.value);input.value='';}}
});
document.getElementById('clearAll').onclick=()=>document.querySelectorAll('.chip').forEach(c=>c.remove());
document.getElementById('shuffleTheme').onclick=()=>{
  const next=randomTheme(currentTheme);
  applyTheme(next);
  // 기존 칩들 색 재적용
  document.querySelectorAll('.chip').forEach(el=>{
    const hue=next.hues[Math.floor(Math.random()*next.hues.length)];
    el.style.setProperty('--h',hue);
  });
};

/* init */
(function init(){
  const t=randomTheme(null);
  applyTheme(t);
})();
</script>
</body>
</html>
